// Generated by LiveScript 1.3.1
(function(){
  var app;
  app = angular.module('dollast-app', ["ngRoute"]);
  app.config([
    '$routeProvider', function($routeProvider){
      return $routeProvider.when('/', {
        templateUrl: 'partials/index.html',
        controller: 'index-ctrl'
      }).when('/problem', {
        templateUrl: 'partials/problem/list.html',
        controller: 'prob-list-ctrl'
      }).when('/problem/:pid', {
        templateUrl: 'partials/problem/show.html',
        controller: 'prob-show-ctrl'
      }).when('/solution/submit/:pid', {
        templateUrl: 'partials/solution/submit.html',
        controller: 'sol-submit-ctrl'
      }).when('/problem/modify/:pid', {
        templateUrl: 'partials/problem/modify.html',
        controller: 'prob-modify-ctrl'
      }).when('/login', {
        templateUrl: 'partials/login.html',
        controller: 'login-ctrl'
      }).when('/solution', {
        templateUrl: 'partials/solution/list.html',
        controller: 'sol-list-ctrl'
      }).when('/solution/:sid', {
        templateUrl: 'partials/solution/show.html',
        controller: 'sol-show-ctrl'
      }).otherwise({
        templateUrl: 'partials/404.html'
      });
    }
  ]);
  app.controller('navbar-ctrl', [
    "$scope", "$http", function($scope, $http){
      return $http.get('/session').success(function(data, status, headers, config){
        $scope.uid = data.user;
        return console.log(JSON.stringify(data) + "");
      });
    }
  ]);
  app.controller('index-ctrl', ["$scope", "$http", function($scope, $http){}]);
  app.controller('login-ctrl', [
    "$scope", "$http", function($scope, $http){
      $scope.user = {
        username: '',
        password: ''
      };
      return $scope.submit = function(user){
        console.log(user);
        return $http.post('/login', $scope.user).success(function(data, status, headers, config){
          return console.log('login OK');
        }).error(function(data, status, headers, config){
          return console.log('login Error');
        });
      };
    }
  ]);
  app.controller('prob-show-ctrl', [
    "$scope", "$http", "$routeParams", function($scope, $http, $routeParams){
      $scope.pid = $routeParams.pid;
      return $http.get("/problem/" + $scope.pid).success(function(data, status, headers, config){
        console.log(data);
        return $scope.prob = data;
      });
    }
  ]);
  app.controller('prob-list-ctrl', [
    "$scope", "$http", "$routeParams", function($scope, $http, $routeParams){
      return $http.get("/problem").success(function(data, status, headers, config){
        console.log("data: " + data);
        return $scope.probs = data;
      });
    }
  ]);
  app.controller('prob-modify-ctrl', [
    "$scope", "$http", "$routeParams", function($scope, $http, $routeParams){
      var pid;
      pid = $routeParams.pid;
      $http.get("/problem/" + pid).success(function(data, status, headers, config){
        var ref$;
        return $scope.prob = (ref$ = clone$(data), ref$._id = pid, ref$);
      });
      return $scope.submit = function(){
        return $http.post("/problem/modify/" + pid, $scope.prob);
      };
    }
  ]);
  app.controller('sol-submit-ctrl', [
    "$scope", "$http", "$routeParams", function($scope, $http, $routeParams){
      $scope.pid = $routeParams.pid;
      $scope.lang = 'C++';
      return $scope.submit = function(){
        return $http.post('/solution/submit', {
          code: $scope.code,
          pid: $scope.pid,
          lang: $scope.lang
        });
      };
    }
  ]);
  app.controller('sol-list-ctrl', [
    "$scope", "$http", "$routeParams", function($scope, $http, $routeParams){
      return $http.get("/solution").success(function(data, status, headers, config){
        console.log("data: " + data);
        return $scope.sols = data;
      });
    }
  ]);
  app.controller('sol-show-ctrl', [
    "$scope", "$http", "$routeParams", function($scope, $http, $routeParams){
      $scope.sid = $routeParams.sid;
      return $http.get("/solution/" + $scope.sid).success(function(data, status, headers, config){
        console.log("data: " + data);
        return $scope.sol = data;
      });
    }
  ]);
  function clone$(it){
    function fun(){} fun.prototype = it;
    return new fun;
  }
}).call(this);
