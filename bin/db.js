// Generated by LiveScript 1.3.1
var debug, config, sol, rnd, prob, user, log, bindCtx, out$ = typeof exports != 'undefined' && exports || this;
debug = require('debug');
config = require('./config');
sol = require('./models/sol');
rnd = require('./models/rnd');
prob = require('./models/prob');
user = require('./models/user');
log = debug("dollast:db");
out$.sol = sol;
out$.rnd = rnd;
out$.prob = prob;
out$.user = user;
out$.bindCtx = bindCtx = function(ctx){
  var i$, ref$, len$, obj, results$ = [], this$ = this;
  for (i$ = 0, len$ = (ref$ = [sol, rnd, prob, user]).length; i$ < len$; ++i$) {
    obj = ref$[i$];
    obj.getCurrentUser = fn$;
    obj.acquirePrivilege = fn1$;
    results$.push(obj['throw'] = ctx['throw']);
  }
  return results$;
  function fn$(){
    return ctx.user;
  }
  function fn1$(priv){
    log("checking privilege: " + priv, ctx.user.priv);
    if (config.mode !== "debug" && !ctx.user.priv[priv]) {
      return ctx['throw'](400, "failure on privilege checking, " + priv + " required. ");
    }
  }
};