// Generated by LiveScript 1.3.1
var db, debug, log, ref$, out$ = typeof exports != 'undefined' && exports || this;
db = require('../db');
debug = require('debug');
log = debug('dollast:ctrl:user');
ref$ = out$;
ref$.save = function*(){
  this.checkBody('_id').len(6, 15);
  delete this.request.body.pswd;
  if (this.errors) {
    return;
  }
  yield db.user.modify(this.request.body);
  this.body = {
    status: {
      type: "ok",
      msg: "user profile saved"
    }
  };
};
ref$.register = function*(){
  this.checkBody('_id').len(6, 15);
  this.checkBody('pswd').len(8, 15);
  if (this.errors) {
    return;
  }
  yield db.user.register(this.request.body);
  this.body = {
    status: {
      type: "ok",
      msg: "registering successfully"
    }
  };
};
ref$.profile = function*(){
  this.body = yield db.user.profile(this.params.uid);
};