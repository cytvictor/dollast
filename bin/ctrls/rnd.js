// Generated by LiveScript 1.4.0
(function(){
  var db, debug, log, ref$, out$ = typeof exports != 'undefined' && exports || this;
  db = require('../db');
  debug = require('debug');
  log = debug('dollast:ctrl:round');
  ref$ = out$;
  ref$.list = function*(){
    return this.body = (yield db.rnd.list());
  };
  ref$.nextCount = function*(){
    this.acquirePrivilege('login');
    return this.body = {
      _id: (yield db.rnd.nextCount())
    };
  };
  ref$.show = function*(){
    return this.body = (yield db.rnd.show(this.params.rid, {
      mode: "view"
    }));
  };
  ref$.save = function*(){
    this.acquirePrivilege('login');
    (yield db.rnd.modify(this.params.rid, this.request.body));
    return this.body = {
      status: {
        type: "ok",
        msg: "round saved"
      }
    };
  };
  ref$.total = function*(){
    this.acquirePrivilege('login');
    return this.body = (yield db.rnd.show(this.params.rid, {
      mode: "total"
    }));
  };
  ref$.remove = function*(){
    this.acquirePrivilege('login');
    (yield db.rnd['delete'](this.params.rid));
    return this.body = {
      status: {
        type: "ok",
        msg: "round has been deleted"
      }
    };
  };
  ref$.board = function*(){
    var rid;
    rid = this.params.rid;
    return this.body = (yield db.rnd.board(rid));
  };
  ref$.publish = function*(){
    var rid;
    this.acquirePrivilege('login');
    rid = this.params.rid;
    return this.body = (yield db.rnd.publish(rid));
  };
}).call(this);
