// Generated by LiveScript 1.3.1
var db, core, coBusboy, ref$, out$ = typeof exports != 'undefined' && exports || this;
db = require('../db');
core = require('../core');
coBusboy = require('co-busboy');
ref$ = out$;
ref$.upload = function*(){
  var pid, parts, part;
  pid = this.params.pid;
  parts = coBusboy(this, {
    autoFields: true
  });
  while (part = yield parts) {
    this.body = yield core.upload(pid, part);
  }
  yield db.prob.updData(pid);
  this.body.status = {
    type: "ok",
    msg: "upload successful"
  };
};
ref$['delete'] = function*(){
  var pid;
  pid = this.params.pid;
  yield core.deleteTestData(pid, this.params.file);
  this.body = {
    status: {
      type: "ok",
      msg: "data has been deleted"
    }
  };
};
ref$.show = function*(){
  var data;
  data = yield db.prob.listDataset(this.params.pid);
  this.body = data;
};