// Generated by LiveScript 1.3.1
(function(){
  var app;
  app = angular.module('dollast-site-app', ["dollast-crud", "angular-jwt"]);
  app.controller('navbar-ctrl', [
    "$scope", "jwtHelper", function($scope, jwtHelper){
      $scope.loadToken = function(){
        var token, payload;
        token = localStorage.token;
        if (!token) {
          return;
        }
        payload = jwtHelper.decodeToken(token);
        console.log(payload);
        return $scope.uid = payload._id;
      };
      $scope.logout = function(){
        var ref$;
        delete localStorage.token;
        return ref$ = $scope.uid, delete $scope.uid, ref$;
      };
      return $scope.loadToken();
    }
  ]);
  app.controller('index-ctrl', ["$scope", "site-serv", "$location", function($scope, siteServ, $location){}]);
  app.controller('login-ctrl', [
    "$scope", "site-serv", function($scope, siteServ){
      return $scope.submit = function(user){
        return siteServ.login($scope.user, function(it){
          console.log(it);
          $scope.msg = it.status !== "OK";
          siteServ.token = it.token;
          return localStorage.token = it.token;
        });
      };
    }
  ]);
}).call(this);
