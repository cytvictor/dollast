// Generated by LiveScript 1.4.0
(function(){
  var vue, store, co, debug, log, login, loadFromToken, logout, out$ = typeof exports != 'undefined' && exports || this;
  vue = require('vue');
  store = require('../store');
  co = require('co');
  debug = require('debug');
  log = debug('dollast:actions');
  out$.login = login = co.wrap(function*(arg$, info){
    var dispatch, data;
    dispatch = arg$.dispatch;
    data = (yield vue.http.post('/site/login', info)).data;
    localStorage.token = data.payload.token;
    return dispatch('loadFromToken', data.payload.token);
  });
  out$.loadFromToken = loadFromToken = function(arg$){
    var dispatch;
    dispatch = arg$.dispatch;
    if (localStorage.token) {
      return dispatch('loadFromToken', localStorage.token);
    }
  };
  out$.logout = logout = function(arg$){
    var dispatch;
    dispatch = arg$.dispatch;
    delete localStorage.token;
    return dispatch('logout');
  };
}).call(this);
