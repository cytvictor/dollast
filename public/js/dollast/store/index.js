// Generated by LiveScript 1.4.0
(function(){
  var vue, vuex, auth, state, mutations;
  vue = require('vue');
  vuex = require('vuex');
  auth = require('./auth');
  state = {
    session: {
      guest: true
    }
  };
  mutations = {
    loadFromToken: function(state, token){
      var payload, clientInfo;
      payload = auth.jwt.dec(token);
      clientInfo = JSON.parse(payload.client);
      localStorage.token = token;
      vue.http.headers.common.Authorization = "Bearer " + token;
      return state.session = {
        guest: false,
        uid: clientInfo.uid,
        token: token
      };
    },
    logout: function(state){
      return state.session = {
        guest: true
      };
    }
  };
  module.exports = new vuex.Store({
    state: state,
    mutations: mutations
  });
}).call(this);
