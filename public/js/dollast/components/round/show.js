// Generated by LiveScript 1.3.1
(function(){
  var createClass, connect, ref$, probLink, iconText, roundTime, onGetRound, I, log, selector;
  createClass = require('react').createClass;
  connect = require('react-redux').connect;
  ref$ = require('../elements'), probLink = ref$.probLink, iconText = ref$.iconText, roundTime = ref$.roundTime;
  onGetRound = require('../../actions').onGetRound;
  I = require('immutable');
  log = debug('dollast:component:round:show');
  selector = function(state){
    return {
      round: state.getIn(['round', 'show'], I.fromJS({
        probs: [],
        begTime: "1960-01-01 00:00:00",
        endTime: "1960-01-01 00:00:00"
      }))
    };
  };
  module.exports = connect(selector)(createClass({
    displayName: 'rnd-show',
    componentDidMount: function(){
      var rid;
      rid = this.props.params.rid;
      return this.props.dispatch(onGetRound(rid, 'show'));
    },
    render: function(){
      var rnd, prob;
      rnd = this.props.round.toJS();
      log(rnd);
      return _('div', null, _('h1', null, "Round " + rnd._id + ". " + rnd.title), _(roundTime, {
        begTime: rnd.begTime,
        endTime: rnd.endTime
      }), rnd.started
        ? _('div', {
          className: "ui segment"
        }, _('h2', null, 'Problemset'), _('div', {
          className: "ui very relaxed divided link list"
        }, (function(){
          var i$, ref$, len$, results$ = [];
          for (i$ = 0, len$ = (ref$ = rnd.probs).length; i$ < len$; ++i$) {
            prob = ref$[i$];
            results$.push(_('div', {
              className: "item",
              key: "problem/" + prob._id
            }, _('div', {
              className: 'description'
            }, _(probLink, {
              pid: prob._id,
              title: prob.outlook.title
            }))));
          }
          return results$;
        }())))
        : _('p', "Sorry, this round has not started."), _('div', null, rnd.started ? _(iconText, {
        className: 'purple',
        text: 'board',
        icon: 'trophy',
        href: "#/round/" + rnd._id + "/board"
      }) : void 8, _(iconText, {
        className: 'orange',
        icon: 'edit',
        text: 'modify',
        href: "#/round/" + rnd._id + "/modify"
      })));
    }
  }));
}).call(this);
