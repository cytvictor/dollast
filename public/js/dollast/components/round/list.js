// Generated by LiveScript 1.3.1
(function(){
  var createClass, connect, I, ref$, dropdown, iconText, rndLink, onGetRoundsList, moment, log, selector;
  createClass = require('react').createClass;
  connect = require('react-redux').connect;
  I = require('immutable');
  ref$ = require('../elements'), dropdown = ref$.dropdown, iconText = ref$.iconText, rndLink = ref$.rndLink;
  onGetRoundsList = require('../../actions').onGetRoundsList;
  moment = require('moment');
  log = debug('dollast:component:round:list');
  selector = function(state){
    return {
      rounds: state.getIn(['round', 'list'], I.fromJS([]))
    };
  };
  module.exports = connect(selector)(createClass({
    displayName: 'rnd-list',
    filter: function(value, text, $choice){
      return log({
        value: value,
        text: text,
        $choice: $choice
      });
    },
    componentWillMount: function(){
      return this.props.dispatch(onGetRoundsList());
    },
    componentDidMount: function(){
      var $filter;
      $filter = $('.dropdown');
      log($filter);
      $filter.dropdown({
        on: 'hover',
        onChange: this.filter
      });
      return $filter.dropdown('set text', 'all');
    },
    render: function(){
      var rounds, rnd, style;
      rounds = this.props.rounds.toJS();
      return _('div', null, _('div', {
        className: 'ui'
      }, _('h1', {
        className: "ui header dividing"
      }, 'rounds'), _(dropdown, {
        className: "floated pointing button labeled icon",
        name: 'filter',
        'default': "please select filter",
        options: {
          'all': 'all',
          'past': 'past',
          'running': 'running',
          'pending': 'pending'
        }
      }), _(iconText, {
        className: "launch primary right floated",
        text: 'create',
        icon: 'plus',
        href: '#/round/create'
      })), _('div', {
        className: 'ui'
      }, _('div', {
        className: "ui very relaxed divided link list"
      }, (function(){
        var i$, ref$, len$, results$ = [];
        for (i$ = 0, len$ = (ref$ = rounds).length; i$ < len$; ++i$) {
          rnd = ref$[i$];
          style = moment().isBefore(rnd.begTime)
            ? 'green'
            : moment().isAfter(rnd.endTime) ? 'grey' : 'red';
          results$.push(_('div', {
            className: "item",
            href: rnd.href,
            key: "round/" + rnd._id
          }, _('div', {
            className: "ui right floated"
          }, " from ", _('div', {
            className: "ui label " + style
          }, moment(rnd.begTime).format('YYYY-MM-DD hh:mm:ss')), " to ", _('div', {
            className: "ui label " + style
          }, moment(rnd.endTime).format('YYYY-MM-DD hh:mm:ss'))), _('div', {
            className: 'description'
          }, _(rndLink, {
            rid: rnd._id,
            title: rnd.title
          }))));
        }
        return results$;
      }()))));
    }
  }));
}).call(this);
