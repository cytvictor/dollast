// Generated by LiveScript 1.4.0
(function(){
  var R, E, sess;
  R = require('react/addons');
  E = require('../elements');
  sess = require('../../stores/sess');
  module.exports = R.createClass({
    displayName: 'register',
    getInitialState: function(){
      return {
        uid: ""
      };
    },
    componentDidMount: function(){
      return $('#register-form').form({
        on: 'blur',
        fields: {
          uid: {
            identifier: 'uid',
            rules: [
              {
                type: 'minLength[3]',
                prompt: "User name must be longer than 5"
              }, {
                type: 'maxLength[16]',
                prompt: "User name must be shorter than 15"
              }
            ]
          },
          pswd: {
            identifier: 'pswd',
            rules: [
              {
                type: 'minLength[3]',
                prompt: 'password length must be longer than 5'
              }, {
                type: 'maxLength[16]',
                prompt: 'password length must be shorter than 15'
              }
            ]
          },
          email: {
            identifier: 'email',
            rules: [{
              type: 'email',
              prompt: 'please enter a valid email address'
            }]
          }
        },
        onSuccess: this.submit,
        debug: true
      });
    },
    submit: function(e){
      var $form, allValues;
      e.preventDefault();
      $form = $('#register-form');
      allValues = $form.form('get values');
      return sess.actions.register(allValues);
    },
    render: function(){
      return _div({
        className: "ui"
      }, _h1({
        className: "ui dividing header"
      }, "Register"), _form({
        className: "ui form segment relaxed",
        id: "register-form"
      }, _(E.field, null, _(E.iconInput, {
        className: "left",
        icon: 'user',
        input: {
          placeholder: "user id",
          name: "uid"
        }
      })), _(E.field, null, _(E.iconInput, {
        className: "left",
        icon: 'lock',
        input: {
          placeholder: 'password',
          name: "pswd",
          type: 'password'
        }
      })), _div({
        className: "field"
      }, _(E.iconInput, {
        className: "left",
        icon: 'mail',
        input: {
          placeholder: "abc@xyz",
          name: 'email',
          type: 'email'
        }
      })), _(E.iconText, {
        className: "left primary labeled submit",
        icon: "sign in",
        text: 'Register'
      }), _div({
        className: "ui error message"
      })));
    }
  });
}).call(this);
