// Generated by LiveScript 1.3.1
(function(){
  var createClass, connect, iconText, onGetProblem, U, I, log, selector, segmentBox;
  createClass = require('react').createClass;
  connect = require('react-redux').connect;
  iconText = require('../elements').iconText;
  onGetProblem = require('../../actions').onGetProblem;
  U = require('../utils');
  I = require('immutable');
  log = debug('dollast:component:problem:show');
  selector = function(state){
    return {
      problem: state.getIn(['problem', 'show'], I.fromJS({
        outlook: {},
        config: {}
      }))
    };
  };
  segmentBox = createClass({
    displayName: 'segment-box',
    render: function(){
      return _('div', {
        className: "ui segment"
      }, _('div', {
        className: "ui top left attached label teal"
      }, this.props.desc), this.props.children);
    }
  });
  module.exports = connect(selector)(createClass({
    displayName: 'prob-show',
    refreshMathjax: function(root){
      return MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
    },
    componentWillMount: function(root){
      this.props.dispatch(onGetProblem(this.props.params.pid, 'show'));
      return this.refreshMathjax(root);
    },
    componentDidUpdate: function(props, states, root){
      return this.refreshMathjax(root);
    },
    render: function(){
      var pid, problem, ref$, ref1$, ref2$, ref3$, ref4$;
      pid = this.props.params.pid;
      problem = this.props.problem.toJS();
      return _('div', {
        className: "ui"
      }, _('h1', {
        className: "ui centered"
      }, "Problem " + pid + ". " + problem.outlook.title), _('p', null, "time limit: " + ((problem.config || (problem.config = {})).timeLmt || '') + " space limit: " + ((problem.config || (problem.config = {})).spaceLmt || '')), _(segmentBox, {
        desc: 'description'
      }, _('p', {
        mathjax: true
      }, (ref$ = problem.outlook) != null ? ref$.desc : void 8)), _('div', {
        className: "ui two column grid"
      }, _('div', {
        className: 'row'
      }, _('div', {
        className: 'column'
      }, _(segmentBox, {
        desc: "input format"
      }, _('p', null, (ref1$ = problem.outlook) != null ? ref1$.inFmt : void 8))), _('div', {
        className: 'column'
      }, _(segmentBox, {
        desc: "output format"
      }, _('p', null, (ref2$ = problem.outlook) != null ? ref2$.outFmt : void 8)))), _('div', {
        className: 'row'
      }, _('div', {
        className: 'column'
      }, _(segmentBox, {
        desc: "sample input"
      }, _('pre', null, (ref3$ = problem.outlook) != null ? ref3$.sampleIn : void 8))), _('div', {
        className: 'column'
      }, _(segmentBox, {
        desc: "sample output"
      }, _('pre', null, (ref4$ = problem.outlook) != null ? ref4$.sampleOut : void 8))))), _('div', {
        className: "ui divider"
      }), _(iconText, {
        className: 'primary',
        href: "#/solution/submit/" + pid,
        text: 'submit',
        icon: 'rocket'
      }), _(iconText, {
        className: 'orange',
        href: "#/problem/" + pid + "/modify",
        text: 'modify',
        icon: 'edit'
      }), _(iconText, {
        className: 'purple',
        href: "#/problem/" + pid + "/stat",
        text: 'statistics',
        icon: "bar chart"
      }));
    }
  }));
}).call(this);
